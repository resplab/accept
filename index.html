<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Acute COPD Exacerbation Prediction Tool (ACCEPT) • accept</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="The Acute COPD Exacerbation Prediction Tool (ACCEPT)">
<meta property="og:description" content="Allows clinicians to predict the rate and severity of future acute exacerbation in Chronic Obstructive Pulmonary Disease (COPD) patients, based on the clinical prediction models published in Adibi et al. (2020) &lt;doi:10.1016/S2213-2600(19)30397-2&gt; and Safari et al. (2022) &lt;doi:10.1016/j.eclinm.2022.101574&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">accept</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="accept">accept<a class="anchor" aria-label="anchor" href="#accept"></a>
</h1></div>
<!-- badges: start -->

<!-- badges: end -->
<p>R package for the ACute COPD Exacerbation Prediction Tool (ACCEPT)</p>
<p>ACCEPT is a prediction model for predicting probability, rate, and severity of exacerbations (also known as lung attacks) in patients with Chronic Obstructive Pulmonary Disease.</p>
<p>ACCEPT has been developed by researchers at the University of British Columbia. Please refer to the published papers for more information:</p>
<p>Adibi A, Sin DD, Safari A, Jonhson KM, Aaron SD, FitzGerald JM, Sadatsafavi M. The Acute COPD Exacerbation Prediction Tool (ACCEPT): a modelling study. The Lancet Respiratory Medicine, Volume 8, Issue 10, 1013 - 1021; <a href="https://doi.org/10.1016/S2213-2600(19)30397-2" class="external-link">doi:10.1016/S2213-2600(19)30397-2</a></p>
<p>Safari, A., Adibi, A., Sin, D.D., Lee, T.Y., Ho, J.K., Sadatsafavi, M. and IMPACT study team, 2022. ACCEPT 2· 0: Recalibrating and externally validating the Acute COPD exacerbation prediction tool (ACCEPT). EClinicalMedicine, 51, p.101574. <a href="http://doi.org/10.1016/j.eclinm.2022.101574" class="external-link">doi:10.1016/j.eclinm.2022.101574</a></p>
<p>The following animation explains the <code>accept</code> model in 90 seconds:</p>
<p><a href="https://www.youtube.com/watch?v=UuGLN128Z3Y" class="external-link"><img src="https://img.youtube.com/vi/UuGLN128Z3Y/0.jpg" alt="IMAGE ALT TEXT HERE"></a></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The latest stable version can be downloaded from CRAN:</p>
<p><code>install.packages('accept')</code></p>
<p>You can install the development version of accept from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"resplab/accept"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The function <code><a href="reference/accept.html">accept()</a></code> provides predictions from the latest version of the <code>accept</code> prediction model. <code><a href="reference/accept1.html">accept1()</a></code> provides predictions of exacerbations for COPD patients per original published manuscript. <code><a href="reference/accept2.html">accept2()</a></code> is an updated version of ACCEPT that is fine tuned for improved predictions in patients who do not have a prior history of exacerbations.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="section level3">
<h3 id="exacerbation-prediction">Exacerbation Prediction<a class="anchor" aria-label="anchor" href="#exacerbation-prediction"></a>
</h3>
<p>To get a prediction for exacerbation rate, you will need to pass in a patient vector. The accept package comes with a sample patient data tibble called <code>samplePatients</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">accept</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/accept.html">accept</a></span><span class="op">(</span><span class="va">samplePatients</span><span class="op">)</span> <span class="co">#accept uses the latest updated prediction model</span></span>
<span><span class="co">#&gt;      ID  male age smoker oxygen statin LAMA LABA   ICS FEV1 BMI SGRQ</span></span>
<span><span class="co">#&gt; 1 10001  TRUE  70   TRUE   TRUE   TRUE TRUE TRUE  TRUE   33  25   50</span></span>
<span><span class="co">#&gt; 2 10002 FALSE  42  FALSE   TRUE  FALSE TRUE TRUE FALSE   40  35   40</span></span>
<span><span class="co">#&gt;   LastYrExacCount LastYrSevExacCount predicted_exac_probability</span></span>
<span><span class="co">#&gt; 1               2                  1                  0.8327888</span></span>
<span><span class="co">#&gt; 2               0                  0                  0.4366622</span></span>
<span><span class="co">#&gt;   predicted_exac_probability_lower_PI predicted_exac_probability_upper_PI</span></span>
<span><span class="co">#&gt; 1                           0.1929329                           0.9924159</span></span>
<span><span class="co">#&gt; 2                           0.0000000                           0.8998712</span></span>
<span><span class="co">#&gt;   predicted_exac_rate predicted_exac_rate_lower_PI predicted_exac_rate_upper_PI</span></span>
<span><span class="co">#&gt; 1           1.7884977                    0.2143485                     4.881703</span></span>
<span><span class="co">#&gt; 2           0.5738758                    0.0000000                     2.301298</span></span>
<span><span class="co">#&gt;   predicted_severe_exac_probability predicted_severe_exac_probability_lower_PI</span></span>
<span><span class="co">#&gt; 1                         0.6026383                                 0.09371195</span></span>
<span><span class="co">#&gt; 2                         0.1085515                                 0.02547523</span></span>
<span><span class="co">#&gt;   predicted_severe_exac_probability_upper_PI predicted_severe_exac_rate</span></span>
<span><span class="co">#&gt; 1                                  0.9575906                  0.9229084</span></span>
<span><span class="co">#&gt; 2                                  0.4784134                  0.1149076</span></span>
<span><span class="co">#&gt;   predicted_severe_exac_rate_lower_PI predicted_severe_exac_rate_upper_PI</span></span>
<span><span class="co">#&gt; 1                          0.09839809                            3.160385</span></span>
<span><span class="co">#&gt; 2                          0.02580535                            0.650880</span></span>
<span><span class="co">#&gt;   azithromycin_predicted_exac_probability</span></span>
<span><span class="co">#&gt; 1                               0.7633086</span></span>
<span><span class="co">#&gt; 2                               0.3291975</span></span>
<span><span class="co">#&gt;   azithromycin_predicted_exac_probability_lower_PI</span></span>
<span><span class="co">#&gt; 1                                        0.1286904</span></span>
<span><span class="co">#&gt; 2                                        0.0000000</span></span>
<span><span class="co">#&gt;   azithromycin_predicted_exac_probability_upper_PI</span></span>
<span><span class="co">#&gt; 1                                        0.9793698</span></span>
<span><span class="co">#&gt; 2                                        0.8524301</span></span>
<span><span class="co">#&gt;   azithromycin_predicted_exac_rate azithromycin_predicted_exac_rate_lower_PI</span></span>
<span><span class="co">#&gt; 1                        1.4409981                                 0.1377579</span></span>
<span><span class="co">#&gt; 2                        0.3992806                                 0.0000000</span></span>
<span><span class="co">#&gt;   azithromycin_predicted_exac_rate_upper_PI</span></span>
<span><span class="co">#&gt; 1                                  3.880998</span></span>
<span><span class="co">#&gt; 2                                  1.913453</span></span>
<span><span class="co">#&gt;   azithromycin_predicted_severe_exac_probability</span></span>
<span><span class="co">#&gt; 1                                     0.51103045</span></span>
<span><span class="co">#&gt; 2                                     0.08544925</span></span>
<span><span class="co">#&gt;   azithromycin_predicted_severe_exac_probability_lower_PI</span></span>
<span><span class="co">#&gt; 1                                              0.07570494</span></span>
<span><span class="co">#&gt; 2                                              0.02469734</span></span>
<span><span class="co">#&gt;   azithromycin_predicted_severe_exac_probability_upper_PI</span></span>
<span><span class="co">#&gt; 1                                               0.9221162</span></span>
<span><span class="co">#&gt; 2                                               0.3567065</span></span>
<span><span class="co">#&gt;   azithromycin_predicted_severe_exac_rate</span></span>
<span><span class="co">#&gt; 1                              0.71545506</span></span>
<span><span class="co">#&gt; 2                              0.08932232</span></span>
<span><span class="co">#&gt;   azithromycin_predicted_severe_exac_rate_lower_PI</span></span>
<span><span class="co">#&gt; 1                                       0.07872393</span></span>
<span><span class="co">#&gt; 2                                       0.02500744</span></span>
<span><span class="co">#&gt;   azithromycin_predicted_severe_exac_rate_upper_PI</span></span>
<span><span class="co">#&gt; 1                                        2.5525368</span></span>
<span><span class="co">#&gt; 2                                        0.4411541</span></span></code></pre></div>
<p><strong>accept2()</strong> and <strong>accept1()</strong> functions return a more detailed dataframe with the predictions for different treatment options with measures of uncertainty.</p>
<p>To visualize the data, there is a graphing function called <strong>plotExacerbations()</strong>, which creates a Plotly bar graph. You have the option of selecting <strong>probability</strong> or <strong>rate</strong> for which prediction you want to see, and either <strong>CI</strong> or <strong>PI</strong> to select the confidence interval or prediction interval respectively.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/accept2.html">accept2</a></span><span class="op">(</span><span class="va">samplePatients</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/plotExacerbations.html">plotExacerbations</a></span><span class="op">(</span><span class="va">results</span>, type<span class="op">=</span><span class="st">"probability"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/plotExacerbations.html">plotExacerbations</a></span><span class="op">(</span><span class="va">results</span>, type<span class="op">=</span><span class="st">"rate"</span><span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/newplot1.png"></p>
<p><img src="./reference/figures/newplot3.png"></p>
</div>
<div class="section level3">
<h3 id="probability-of-n-exacerbations-poisson">Probability of N Exacerbations (Poisson)<a class="anchor" aria-label="anchor" href="#probability-of-n-exacerbations-poisson"></a>
</h3>
<p>You can also calculate the predicted number of exacerbations in a year:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/accept2.html">accept2</a></span><span class="op">(</span><span class="va">samplePatients</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span> </span>
<span><span class="va">exacerbationsMatrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/predictCountProb.html">predictCountProb</a></span><span class="op">(</span><span class="va">results</span>, n <span class="op">=</span> <span class="fl">10</span>, shortened <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">exacerbationsMatrix</span><span class="op">)</span></span>
<span><span class="co">#&gt;                         none severe   1 severe   2 severe 3 or more severe</span></span>
<span><span class="co">#&gt; no exacerbations         0.16721119 0.00000000 0.00000000       0.00000000</span></span>
<span><span class="co">#&gt; 1 exacerbation           0.11883372 0.18022310 0.00000000       0.00000000</span></span>
<span><span class="co">#&gt; 2 exacerbations          0.04222640 0.12808103 0.09712378       0.00000000</span></span>
<span><span class="co">#&gt; 3 or more exacerbations  0.01206628 0.05851757 0.10055944       0.07102149</span></span></code></pre></div>
<p>The shortened parameter groups the probabilities from 3-10 exacerbations into one category, “3 or more exacerbations.” To see all n exacerbation probabilities:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exacerbationsMatrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/predictCountProb.html">predictCountProb</a></span><span class="op">(</span><span class="va">results</span>, n <span class="op">=</span> <span class="fl">10</span>, shortened <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">exacerbationsMatrix</span><span class="op">)</span></span>
<span><span class="co">#&gt;                       0 severe     1 severe     2 severe     3 severe</span></span>
<span><span class="co">#&gt; 0 exacerbation(s) 1.672112e-01 0.000000e+00 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 1 exacerbation(s) 1.188337e-01 1.802231e-01 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 2 exacerbation(s) 4.222640e-02 1.280810e-01 9.712378e-02 0.000000e+00</span></span>
<span><span class="co">#&gt; 3 exacerbation(s) 1.000316e-02 4.551234e-02 6.902397e-02 3.489389e-02</span></span>
<span><span class="co">#&gt; 4 exacerbation(s) 1.777262e-03 1.078158e-02 2.452699e-02 2.479841e-02</span></span>
<span><span class="co">#&gt; 5 exacerbation(s) 2.526131e-04 1.915564e-03 5.810285e-03 8.811872e-03</span></span>
<span><span class="co">#&gt; 6 exacerbation(s) 2.992120e-05 2.722708e-04 1.032314e-03 2.087475e-03</span></span>
<span><span class="co">#&gt; 7 exacerbation(s) 3.037773e-06 3.224959e-05 1.467291e-04 3.708819e-04</span></span>
<span><span class="co">#&gt; 8 exacerbation(s) 2.698608e-07 3.274164e-06 1.737958e-05 5.271571e-05</span></span>
<span><span class="co">#&gt; 9 exacerbation(s) 2.130942e-08 2.908606e-07 1.764475e-06 6.244004e-06</span></span>
<span><span class="co">#&gt;                       4 severe     5 severe     6 severe     7 severe</span></span>
<span><span class="co">#&gt; 0 exacerbation(s) 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 1 exacerbation(s) 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 2 exacerbation(s) 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 3 exacerbation(s) 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 4 exacerbation(s) 9.402310e-03 0.000000e+00 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 5 exacerbation(s) 6.682038e-03 2.026794e-03 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 6 exacerbation(s) 2.374397e-03 1.440403e-03 3.640856e-04 0.000000e+00</span></span>
<span><span class="co">#&gt; 7 exacerbation(s) 5.624791e-04 5.118332e-04 2.587485e-04 5.605968e-05</span></span>
<span><span class="co">#&gt; 8 exacerbation(s) 9.993573e-05 1.212499e-04 9.194377e-05 3.984052e-05</span></span>
<span><span class="co">#&gt; 9 exacerbation(s) 1.420447e-05 2.154249e-05 2.178088e-05 1.415694e-05</span></span>
<span><span class="co">#&gt;                       8 severe     9 severe</span></span>
<span><span class="co">#&gt; 0 exacerbation(s) 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 1 exacerbation(s) 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 2 exacerbation(s) 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 3 exacerbation(s) 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 4 exacerbation(s) 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 5 exacerbation(s) 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 6 exacerbation(s) 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 7 exacerbation(s) 0.000000e+00 0.000000e+00</span></span>
<span><span class="co">#&gt; 8 exacerbation(s) 7.552761e-06 0.000000e+00</span></span>
<span><span class="co">#&gt; 9 exacerbation(s) 5.367600e-06 9.044996e-07</span></span></code></pre></div>
<p>To visualize the matrix as a heatmap, we can use the function <strong>plotHeatMap</strong>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plotHeatMap.html">plotHeatMap</a></span><span class="op">(</span><span class="va">results</span>, shortened <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/newplot4.png"></p>
</div>
</div>
<div class="section level2">
<h2 id="web-app-for-accept">Web App for ACCEPT<a class="anchor" aria-label="anchor" href="#web-app-for-accept"></a>
</h2>
<p>ACCEPT is also available as web app, accessible at <a href="http://resp.core.ubc.ca/ipress/accept" class="external-link uri">http://resp.core.ubc.ca/ipress/accept</a></p>
<p><img src="./reference/figures/accept_shiny.png"></p>
</div>
<div class="section level2">
<h2 id="api-using-vetiver-and-plumber">API using vetiver and plumber<a class="anchor" aria-label="anchor" href="#api-using-vetiver-and-plumber"></a>
</h2>
<p>You can use vetiver and plumber packages to create, deploy, and monitor an API for ACCEPT:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://vetiver.rstudio.com" class="external-link">vetiver</a></span><span class="op">)</span></span>
<span><span class="va">v_accept</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rstudio.github.io/vetiver-r/reference/vetiver_model.html" class="external-link">vetiver_model</a></span><span class="op">(</span><span class="va">accept</span>, </span>
<span>                   <span class="st">"accept-model"</span><span class="op">)</span></span></code></pre></div>
<p>To test to API locally, you can use</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rplumber.io" class="external-link">plumber</a></span><span class="op">)</span></span>
<span><span class="fu">pr</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rstudio.github.io/vetiver-r/reference/vetiver_api.html" class="external-link">vetiver_api</a></span><span class="op">(</span><span class="va">v_accept</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">pr_run</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="cloud-based-api-access-through-peer-models-network">Cloud-based API Access through Peer Models Network<a class="anchor" aria-label="anchor" href="#cloud-based-api-access-through-peer-models-network"></a>
</h2>
<p>The <a href="https://resp.core.ubc.ca/show/pmnintro" class="external-link">Peer Models Network</a> allows users to access ACCEPT through the cloud. A MACRO-enabled Excel-file can be used to interact with the model and see the results. To download the PRISM Excel template file for ACCEPT, please refer to the <a href="https://models.peermodelsnetwork.com" class="external-link">Peer Models Network model repository</a>.</p>
<div class="section level4">
<h4 id="python">Python<a class="anchor" aria-label="anchor" href="#python"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>import json</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>import requests</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">'https://prism.peermodelsnetwork.com/route/accept/run'</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>headers <span class="ot">=</span> {<span class="st">'x-prism-auth-user'</span><span class="sc">:</span> YOUR_API_KEY}</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>model_run <span class="ot">=</span> <span class="fu">requests.post</span>(url, <span class="at">headers=</span>headers,</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="at">json =</span> {<span class="st">"func"</span><span class="sc">:</span>[<span class="st">"prism_model_run"</span>],<span class="st">"model_input"</span><span class="sc">:</span>[{<span class="st">"ID"</span><span class="sc">:</span> <span class="st">"10001"</span>,<span class="st">"male"</span><span class="sc">:</span> <span class="dv">1</span>,<span class="st">"age"</span><span class="sc">:</span> <span class="dv">57</span>,<span class="st">"smoker"</span><span class="sc">:</span> <span class="dv">0</span>,<span class="st">"oxygen"</span><span class="sc">:</span> <span class="dv">0</span>,<span class="st">"statin"</span><span class="sc">:</span> <span class="dv">0</span>,<span class="st">"LAMA"</span><span class="sc">:</span> <span class="dv">1</span>,<span class="st">"LABA"</span><span class="sc">:</span> <span class="dv">1</span>,<span class="st">"ICS"</span><span class="sc">:</span> <span class="dv">1</span>,<span class="st">"FEV1"</span><span class="sc">:</span> <span class="dv">51</span>,<span class="st">"BMI"</span><span class="sc">:</span> <span class="dv">18</span>,<span class="st">"SGRQ"</span><span class="sc">:</span> <span class="dv">63</span>,<span class="st">"LastYrExacCount"</span><span class="sc">:</span> <span class="dv">2</span>,<span class="st">"LastYrSevExacCount"</span><span class="sc">:</span> <span class="dv">1</span>,<span class="st">"randomized_azithromycin"</span><span class="sc">:</span> <span class="dv">0</span>,<span class="st">"randomized_statin"</span><span class="sc">:</span> <span class="dv">0</span>,<span class="st">"randomized_LAMA"</span><span class="sc">:</span> <span class="dv">0</span>,<span class="st">"randomized_LABA"</span><span class="sc">:</span> <span class="dv">0</span>,<span class="st">"randomized_ICS"</span><span class="sc">:</span> <span class="dv">0</span>, <span class="st">"random_sampling_N"</span> <span class="sc">:</span> <span class="dv">100</span>,  <span class="st">"calculate_CIs"</span> <span class="sc">:</span> <span class="st">"TRUE"</span>}]})</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="fu">print</span>(model_run)</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>results <span class="ot">=</span> <span class="fu">json.loads</span>(model_run.text)</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="fu">print</span>(results)</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="linux-bash">Linux Bash<a class="anchor" aria-label="anchor" href="#linux-bash"></a>
</h4>
<p>In Ubuntu, you can call the API with <code>curl</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>curl \</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="sc">-</span>X POST \</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="sc">-</span>H <span class="st">"x-prism-auth-user: REPLACE_WITH_API_KEY"</span> \</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="sc">-</span>H <span class="st">"Content-Type: application/json"</span> \</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="sc">-</span>d <span class="st">'{"func":["prism_model_run"],"model_input":[{"ID": "10001","male": 1,"age": 57,"smoker": 0,"oxygen": 0,"statin": 0,"LAMA": 1,"LABA": 1,"ICS": 1,"FEV1": 51,"BMI": 18,"SGRQ": 63,"LastYrExacCount": 2,"LastYrSevExacCount": 1,"randomized_azithromycin": 0,"randomized_statin": 0,"randomized_LAMA": 0,"randomized_LABA": 0,"randomized_ICS": 0, "random_sampling_N" : 100, </span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="st">"calculate_CIs" : "TRUE"}]}'</span> \</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>prism.peermodelsnetwork.com<span class="sc">/</span>route<span class="sc">/</span>accept<span class="sc">/</span>run</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>Please cite:</p>
<p>Adibi A, Sin DD, Safari A, Jonhson KM, Aaron SD, FitzGerald JM, Sadatsafavi M. The Acute COPD Exacerbation Prediction Tool (ACCEPT): a modelling study. The Lancet Respiratory Medicine. Volume 8, Issue 10, 1013 - 1021 <a href="https://doi.org/10.1016/S2213-2600(19)30397-2" class="external-link">doi:10.1016/S2213-2600(19)30397-2</a></p>
<p>Safari, A., Adibi, A., Sin, D.D., Lee, T.Y., Ho, J.K., Sadatsafavi, M. and IMPACT study team, 2022. ACCEPT 2· 0: Recalibrating and externally validating the Acute COPD exacerbation prediction tool (ACCEPT). EClinicalMedicine, 51, p.101574. <a href="http://doi.org/10.1016/j.eclinm.2022.101574" class="external-link">doi:10.1016/j.eclinm.2022.101574</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=accept" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing accept</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Amin Adibi <br><small class="roles"> Author, maintainer </small>   </li>
<li>Mohsen Sadatsafavi <br><small class="roles"> Author, copyright holder </small>   </li>
<li>Abdollah Safari <br><small class="roles"> Author </small>   </li>
<li>Ainsleigh Hill <br><small class="roles"> Author </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/resplab/accept/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/resplab/accept/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://cran.r-project.org/package=accept" class="external-link"><img src="https://www.r-pkg.org/badges/version/accept" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=accept" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/accept" alt="metacran downloads"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Amin Adibi, Mohsen Sadatsafavi, Abdollah Safari, Ainsleigh Hill.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
